@page "/"
@inject HttpClient Http

<h1>TIOBE index latest</h1>

<button @onclick="FetchData">Get Data</button>

@if (fact != null){

    <h3>Fact: @fact.text</h3>
    

}

@code {

    public Fact fact;

    public HttpClient httpClient = new HttpClient();

    public async Task FetchData()
    {
        fact = await httpClient.GetFromJsonAsync<Fact>("https://uselessfacts.jsph.pl/api/v2/facts/random");
    }

    public class Fact
    {
         
        public string id { get; set; }
        public string text { get; set; }
        public string source { get; set; }
        public string source_url { get; set; }
        public string language { get; set; }
        public string permalink { get; set; }
        

    }
}


@*
CORS enabled on function app
this app is published as an Azure app service also https://tiobeindex-gc.azurewebsites.net
*@


